---
import Layout from '../layouts/Layout.astro';

const cart = [
  { id: 1, name: 'Session 1', price: 10 },
  { id: 2, name: 'Session 2', price: 20 },
];

await Astro.session?.set('cart', cart);
const sessionCart = await Astro.session?.get('cart') || [];
---

<Layout title="My Sessions Page" description="A page to demonstrate session handling in Astro.">
  <h1 class="text-3xl text-purple-800">Sessions Example</h1>
  <p>This page demonstrates how to use sessions in Astro.</p>
  <p>Astro sessions store user data Server side.</p>

  <h2 class="text-2xl mt-4">Cart Items:</h2>
  {sessionCart.length > 0 ? (
    <ul>
      {sessionCart.map(item => (
        <li key={item.id} class="mb-2">
          {item.name} - ${item.price}
        </li>
      ))}
    </ul>
  ) : (
    <p>Your cart is empty.</p>
  )}    